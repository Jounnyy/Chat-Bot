{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP PC\\\\OneDrive\\\\Desktop\\\\CB\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport data from \"./data.json\";\nimport ProductData from \"./product.json\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { Container, Header, Product, ProductList, ProductId, ProductName, ProductDescription, ProductPrice, Chat, ChatInputWrapper, ChatInput, ChatSubmit, ChatBox, WrapperBubbleBot, WrapperBubbleUser, BubbleBot, BubbleUser } from \"./styled\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [productList, setProductList] = useState([]);\n  const [chatInput, setChatInput] = useState(\"\");\n  const [chatList, setChatList] = useState([]);\n  const [step, setStep] = useState(\"\");\n  const [keranjang, setKeranjang] = useState({});\n  const [disableButton, setDisableButton] = useState(false);\n  const chatRef = useRef();\n\n  const submitChat = () => {\n    let list;\n    let chatBot;\n    let chatUser = [];\n    let isFinishChat = false;\n\n    if (chatInput.length > 0) {\n      chatUser = [...chatList, {\n        sender: \"user\",\n        chat: chatInput\n      }];\n      setChatList(chatUser);\n    }\n\n    if (chatList.length === 0) {\n      chatBot = data.bot[0];\n      setStep(\"name\");\n    } else if (step === \"name\") {\n      chatBot = data.bot[1];\n      setStep(\"product\");\n      const nama = {\n        buyerName: chatInput\n      };\n      setKeranjang(nama);\n    } else if (step === \"product\") {\n      if (productList[chatInput - 1] === undefined) {\n        chatBot = data.khusus[0];\n      } else {\n        chatBot = data.bot[2];\n        setStep(\"jumlah\");\n        const product = { ...keranjang,\n          ...productList[chatInput - 1]\n        };\n        setKeranjang(product);\n      }\n    } else if (step === \"jumlah\") {\n      const jumlah = parseInt(chatInput);\n\n      if (isNaN(jumlah)) {\n        chatBot = data.khusus[1];\n      } else {\n        chatBot = data.bot[3];\n        setStep(\"alamat\");\n        const dataJumlah = {\n          jumlah: chatInput,\n          totalHarga: keranjang.price * chatInput\n        };\n        const product = { ...keranjang,\n          ...dataJumlah\n        };\n        setKeranjang(product);\n      }\n    } else if (step === \"alamat\") {\n      chatBot = data.bot[4];\n      isFinishChat = true;\n      const alamat = {\n        alamat: chatInput\n      };\n      const product = { ...keranjang,\n        ...alamat\n      };\n      setKeranjang(product);\n    }\n\n    setChatInput(\"\");\n    setDisableButton(true);\n    list = [...chatUser, chatBot];\n    setTimeout(() => {\n      setChatList(list);\n      setDisableButton(false);\n\n      if (isFinishChat) {\n        setTimeout(() => {\n          setStep(\"selesai\");\n        }, 900);\n      }\n    }, 700);\n  };\n\n  const repeatOrder = () => {\n    setChatList([]);\n    setKeranjang({});\n    setStep(\"\");\n  };\n\n  const textButton = () => {\n    if (chatList.length === 0) {\n      return \"Mulai Chat\";\n    } else if (chatList.length > 0 && step !== \"selesai\") {\n      return \"Kirim\";\n    } else if (chatList.length > 0 && step === \"selesai\") {\n      return \"Pesan Lagi\";\n    }\n  };\n\n  const handleClick = () => {\n    if (step === \"selesai\") {\n      repeatOrder();\n    } else {\n      submitChat();\n    }\n  };\n\n  const scrollToBottom = () => {\n    var _chatRef$current;\n\n    (_chatRef$current = chatRef.current) === null || _chatRef$current === void 0 ? void 0 : _chatRef$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n\n  useEffect(() => {\n    setProductList(ProductData.product);\n  }, []);\n  useEffect(() => {\n    scrollToBottom();\n  }, [chatList, step]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: \"Toko Tokoan\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Product, {\n      children: productList.map((product, index) => {\n        return /*#__PURE__*/_jsxDEV(ProductList, {\n          children: [/*#__PURE__*/_jsxDEV(ProductId, {\n            children: [\"ID Product: \", product.id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ProductName, {\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ProductDescription, {\n            children: product.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ProductPrice, {\n            children: [\"Rp. \", product.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Chat, {\n      children: [/*#__PURE__*/_jsxDEV(ChatBox, {\n        children: [chatList.map((chat, index) => {\n          return chat.sender === \"bot\" ? /*#__PURE__*/_jsxDEV(WrapperBubbleBot, {\n            children: /*#__PURE__*/_jsxDEV(BubbleBot, {\n              children: chat.chat\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(WrapperBubbleUser, {\n            children: /*#__PURE__*/_jsxDEV(BubbleUser, {\n              children: chat.chat\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this);\n        }), step === \"selesai\" && /*#__PURE__*/_jsxDEV(WrapperBubbleBot, {\n          children: /*#__PURE__*/_jsxDEV(BubbleBot, {\n            children: [\"Pembelian anda:\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this), \"Nama: \", keranjang.buyerName, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 17\n            }, this), \"Alamat: \", keranjang.alamat, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 17\n            }, this), \"Nama produk: \", keranjang.name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this), \"Harga produk: \", keranjang.price, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this), \"Jumlah beli: \", keranjang.jumlah, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 17\n            }, this), \"Total Harga: \", keranjang.totalHarga]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: chatRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChatInputWrapper, {\n        children: [/*#__PURE__*/_jsxDEV(ChatInput, {\n          value: chatInput,\n          onChange: event => {\n            setChatInput(event.target.value);\n          },\n          disabled: chatList.length === 0 || step === \"selesai\",\n          placeholder: chatList.length === 0 ? \"klik tombol mulai chat\" : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ChatSubmit, {\n          onClick: handleClick,\n          disabled: disableButton,\n          children: textButton()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"hTz4BzTk6+i/z1vrfcY4zgZTFPg=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/HP PC/OneDrive/Desktop/CB/src/App.js"],"names":["data","ProductData","useState","useEffect","useRef","Container","Header","Product","ProductList","ProductId","ProductName","ProductDescription","ProductPrice","Chat","ChatInputWrapper","ChatInput","ChatSubmit","ChatBox","WrapperBubbleBot","WrapperBubbleUser","BubbleBot","BubbleUser","App","productList","setProductList","chatInput","setChatInput","chatList","setChatList","step","setStep","keranjang","setKeranjang","disableButton","setDisableButton","chatRef","submitChat","list","chatBot","chatUser","isFinishChat","length","sender","chat","bot","nama","buyerName","undefined","khusus","product","jumlah","parseInt","isNaN","dataJumlah","totalHarga","price","alamat","setTimeout","repeatOrder","textButton","handleClick","scrollToBottom","current","scrollIntoView","behavior","map","index","id","name","description","event","target","value"],"mappings":"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","sourcesContent":["import data from \"./data.json\";\nimport ProductData from \"./product.json\";\nimport { useState, useEffect, useRef } from \"react\";\n\nimport {\n  Container,\n  Header,\n  Product,\n  ProductList,\n  ProductId,\n  ProductName,\n  ProductDescription,\n  ProductPrice,\n  Chat,\n  ChatInputWrapper,\n  ChatInput,\n  ChatSubmit,\n  ChatBox,\n  WrapperBubbleBot,\n  WrapperBubbleUser,\n  BubbleBot,\n  BubbleUser,\n} from \"./styled\";\n\nconst App = () => {\n  const [productList, setProductList] = useState([]);\n  const [chatInput, setChatInput] = useState(\"\");\n  const [chatList, setChatList] = useState([]);\n  const [step, setStep] = useState(\"\");\n  const [keranjang, setKeranjang] = useState({});\n  const [disableButton, setDisableButton] = useState(false);\n\n  const chatRef = useRef();\n\n  const submitChat = () => {\n    let list;\n    let chatBot;\n    let chatUser = [];\n    let isFinishChat = false;\n\n    if (chatInput.length > 0) {\n      chatUser = [...chatList, { sender: \"user\", chat: chatInput }];\n      setChatList(chatUser);\n    }\n\n    if (chatList.length === 0) {\n      chatBot = data.bot[0];\n      setStep(\"name\");\n    } else if (step === \"name\") {\n      chatBot = data.bot[1];\n      setStep(\"product\");\n\n      const nama = { buyerName: chatInput };\n      setKeranjang(nama);\n    } else if (step === \"product\") {\n      if (productList[chatInput - 1] === undefined) {\n        chatBot = data.khusus[0];\n      } else {\n        chatBot = data.bot[2];\n        setStep(\"jumlah\");\n\n        const product = { ...keranjang, ...productList[chatInput - 1] };\n        setKeranjang(product);\n      }\n    } else if (step === \"jumlah\") {\n      const jumlah = parseInt(chatInput);\n      if (isNaN(jumlah)) {\n        chatBot = data.khusus[1];\n      } else {\n        chatBot = data.bot[3];\n        setStep(\"alamat\");\n\n        const dataJumlah = {\n          jumlah: chatInput,\n          totalHarga: keranjang.price * chatInput,\n        };\n        const product = { ...keranjang, ...dataJumlah };\n        setKeranjang(product);\n      }\n    } else if (step === \"alamat\") {\n      chatBot = data.bot[4];\n      isFinishChat = true;\n\n      const alamat = { alamat: chatInput };\n      const product = { ...keranjang, ...alamat };\n      setKeranjang(product);\n    }\n    setChatInput(\"\");\n    setDisableButton(true);\n\n    list = [...chatUser, chatBot];\n    setTimeout(() => {\n      setChatList(list);\n      setDisableButton(false);\n\n      if (isFinishChat) {\n        setTimeout(() => {\n          setStep(\"selesai\");\n        }, 900);\n      }\n    }, 700);\n  };\n\n  const repeatOrder = () => {\n    setChatList([]);\n    setKeranjang({});\n    setStep(\"\");\n  };\n\n  const textButton = () => {\n    if (chatList.length === 0) {\n      return \"Mulai Chat\";\n    } else if (chatList.length > 0 && step !== \"selesai\") {\n      return \"Kirim\";\n    } else if (chatList.length > 0 && step === \"selesai\") {\n      return \"Pesan Lagi\";\n    }\n  };\n\n  const handleClick = () => {\n    if (step === \"selesai\") {\n      repeatOrder();\n    } else {\n      submitChat();\n    }\n  };\n\n  const scrollToBottom = () => {\n    chatRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    setProductList(ProductData.product);\n  }, []);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [chatList, step]);\n\n  return (\n    <Container>\n      <Header>Toko Tokoan</Header>\n      {/* Product */}\n      <Product>\n        {productList.map((product, index) => {\n          return (\n            <ProductList key={index}>\n              <ProductId>ID Product: {product.id}</ProductId>\n              <ProductName>{product.name}</ProductName>\n              <ProductDescription>{product.description}</ProductDescription>\n              <ProductPrice>Rp. {product.price}</ProductPrice>\n            </ProductList>\n          );\n        })}\n      </Product>\n\n      {/* Chat */}\n      <Chat>\n        <ChatBox>\n          {chatList.map((chat, index) => {\n            return chat.sender === \"bot\" ? (\n              <WrapperBubbleBot>\n                <BubbleBot>{chat.chat}</BubbleBot>\n              </WrapperBubbleBot>\n            ) : (\n              <WrapperBubbleUser>\n                <BubbleUser>{chat.chat}</BubbleUser>\n              </WrapperBubbleUser>\n            );\n          })}\n          {step === \"selesai\" && (\n            <WrapperBubbleBot>\n              <BubbleBot>\n                Pembelian anda:\n                <br />\n                Nama: {keranjang.buyerName}\n                <br />\n                Alamat: {keranjang.alamat}\n                <br />\n                Nama produk: {keranjang.name}\n                <br />\n                Harga produk: {keranjang.price}\n                <br />\n                Jumlah beli: {keranjang.jumlah}\n                <br />\n                Total Harga: {keranjang.totalHarga}\n              </BubbleBot>\n            </WrapperBubbleBot>\n          )}\n          <div ref={chatRef} />\n        </ChatBox>\n\n        <ChatInputWrapper>\n          <ChatInput\n            value={chatInput}\n            onChange={(event) => {\n              setChatInput(event.target.value);\n            }}\n            disabled={chatList.length === 0 || step === \"selesai\"}\n            placeholder={chatList.length === 0 ? \"klik tombol mulai chat\" : \"\"}\n          />\n          <ChatSubmit onClick={handleClick} disabled={disableButton}>\n            {textButton()}\n          </ChatSubmit>\n        </ChatInputWrapper>\n      </Chat>\n    </Container>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}